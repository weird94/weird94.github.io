!function(e){var t={};function r(n){if(t[n])return t[n].exports;var i=t[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:n})},r.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=6)}([function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CHESS_BOARD_SIZE=18,t.COLUMN_WIDTH=40,t.CHESS_PIECE_WIDTH=36,t.CHESS_BOARD_LINE_COLOR="#000",t.CHESS_BOARD_BACKGROUND="#3096f0",t.CHESS_TYPES={WHITE_CHESS_PIECE:{color:"#fff",name:"白子"},BLACK_CHESS_PIECE:{color:"#000",name:"黑子"}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.atLeastOneTrue=t.transfromOffset2Grid=t.initChessPieceArr=void 0;var n=r(0);t.initChessPieceArr=function(){return new Array(n.CHESS_BOARD_SIZE).fill(0).map(function(){return new Array(n.CHESS_BOARD_SIZE).fill(null)})},t.transfromOffset2Grid=function(e){return~~(e/n.COLUMN_WIDTH-.5)},t.atLeastOneTrue=function(){return Array.from(arguments).map(function(e){return!!e}).map(function(e){return e+0}).reduce(function(e,t){return e+t})}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=r(0),s=function(){function e(t,r,n,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.x=t,this.y=r,this.chessType=n,this.id=i}return n(e,[{key:"draw",value:function(e){var t=document.createElement("div");t.id=this.id,t.style.width=i.CHESS_PIECE_WIDTH+"px",t.style.height=i.CHESS_PIECE_WIDTH+"px",t.style.borderRadius=i.CHESS_PIECE_WIDTH/2+"px",t.style.backgroundColor=i.CHESS_TYPES[this.chessType].color,t.style.position="absolute";var r=function(e){return(e+1)*i.COLUMN_WIDTH-i.CHESS_PIECE_WIDTH/2+"px"};t.style.left=r(this.x),t.style.top=r(this.y),e.appendChild(t)}},{key:"remove",value:function(){var e=document.getElementById(this.id);e.parentNode.removeChild(e)}},{key:"drawCanvas",value:function(e){console.log(this),e.fillStyle=i.CHESS_TYPES[this.chessType].color;var t=function(e){return(e+1)*i.COLUMN_WIDTH},r=new Path2D,n=t(this.x),s=t(this.y);r.moveTo(n,s),r.arc(n,s,i.CHESS_PIECE_WIDTH/2,0,2*Math.PI),e.fill(r)}},{key:"removeCanvs",value:function(e){}}]),e}();t.default=s},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.drawBoardLines=t.initCanvas=void 0;var n=r(0);t.initCanvas=function(){var e=document.getElementById("canvas");return e.style.display="block",e.style.border="1px solid "+n.CHESS_BOARD_LINE_COLOR,e.style.backgroundColor=n.CHESS_BOARD_BACKGROUND,e},t.drawBoardLines=function(e){var t=(n.CHESS_BOARD_SIZE+1)*n.COLUMN_WIDTH;e.clearRect(0,0,t,t),e.fillStyle=n.CHESS_BOARD_LINE_COLOR;for(var r=0;r<n.CHESS_BOARD_SIZE;r++)e.fillRect((r+1)*n.COLUMN_WIDTH,0,1,t),e.fillRect(0,(r+1)*n.COLUMN_WIDTH,t,1)}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(0);t.default=function(){var e=document.createElement("div"),t=(n.CHESS_BOARD_SIZE+1)*n.COLUMN_WIDTH;e.style.width=t+"px",e.style.height=t+"px",e.style.border="1px solid "+n.CHESS_BOARD_LINE_COLOR,e.style.backgroundColor=n.CHESS_BOARD_BACKGROUND,e.style.position="relative";var r=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"H";return function(r,i,s){var c=document.createElement("div");return c.style.backgroundColor=n.CHESS_BOARD_LINE_COLOR,c.style.position="absolute","H"===e?(c.style.top=(i+1)*n.COLUMN_WIDTH+"px",c.style.width=t+"px",c.style.height="1px"):(c.style.left=(i+1)*n.COLUMN_WIDTH+"px",c.style.height=t+"px",c.style.width="1px"),c}},i=new Array(n.CHESS_BOARD_SIZE).fill(1);return i.map(r("H")).forEach(function(t){e.appendChild(t)}),i.map(r("V")).forEach(function(t){e.appendChild(t)}),e}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=u(r(4)),s=r(3),c=u(r(2)),o=r(0),a=r(1);function u(e){return e&&e.__esModule?e:{default:e}}var l=function(){function e(){var t=this,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{isCanvas:!1,chessPieceArr:(0,a.initChessPieceArr)()},n=r.isCanvas,c=r.chessPieceArr,o=void 0===c?(0,a.initChessPieceArr)():c;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.chessPieceArr=o,this.isCanvas=n;var u=this.getRecoverArray(o);if(this.count=u.length,this.isCanvas){this.chessBoardDom=(0,s.initCanvas)();var l=this.chessBoardDom.getContext("2d");this.chessBoardCtx=l,(0,s.drawBoardLines)(l),u.forEach(function(e){e.drawCanvas(l)})}else this.chessBoardDom=(0,i.default)(),u.forEach(function(e){e.draw(t.chessBoardDom)});this.chessBoardDom.onclick=function(e){t.onBoardClick(e)},n||document.getElementById("app").appendChild(this.chessBoardDom)}return n(e,[{key:"getRecoverArray",value:function(e){for(var t=[],r=0,n=e.length;r<n;r++)for(var i=0,s=e[r].length;i<s;i++){var o=e[r][i];if(o){var a=new c.default(r,i,o.type,o.id);t.push(a)}}return t}},{key:"onBoardClick",value:function(e){var t=e.clientX,r=e.clientY;console.log(this);var n=(0,a.transfromOffset2Grid)(t),i=(0,a.transfromOffset2Grid)(r+window.scrollY);if(!this.chessPieceArr[n][i]){var s=this.count%2==0?"BLACK_CHESS_PIECE":"WHITE_CHESS_PIECE";this.lastStep={x:n,y:i,type:s,id:this.count},document.getElementById("cancel").innerHTML="悔棋";var o=new c.default(n,i,s,this.count);this.chessPieceArr[n][i]={type:s,id:this.count},console.log(this.chessPieceArr[n][i]),this.count++,this.isCanvas?o.drawCanvas(this.chessBoardCtx):o.draw(this.chessBoardDom),this.judge(n,i)}}},{key:"cancelLastStep",value:function(){if(document.getElementById("cancel").innerHTML="撤销悔棋",this.lastStep){var e=this.lastStep,t=e.x,r=e.y;if(this.count=this.count-1,this.chessPieceArr[t][r]=null,this.isCanvas){var n=this.getRecoverArray(this.chessPieceArr);(0,s.drawBoardLines)(this.chessBoardCtx),n.forEach(function(e){e.drawCanvas()})}else{var i=document.getElementById(this.count);i.parentNode.removeChild(i)}}}},{key:"cancelTheCancel",value:function(){document.getElementById("cancel").innerHTML="悔棋";var e=this.lastStep,t=e.x,r=e.y,n=e.type,i=e.id,s=new c.default(t,r,n,i);this.isCanvas?s.drawCanvas(this.chessBoardCtx):s.draw(this.chessBoardDom),this.chessPieceArr[t][r]={type:n,id:i},this.count=this.count+1}},{key:"removeDom",value:function(){this.isCanvas?this.chessBoardDom.style.display="none":this.chessBoardDom.parentNode.removeChild(this.chessBoardDom)}},{key:"judge",value:function(e,t){var r=this.chessPieceArr[e][t].type;(0,a.atLeastOneTrue)(this.judgeX(e,t,r),this.judgeX_(e,t,r),this.judgeY(e,t,r),this.judgeY_(e,t,r),this.judgeXY(e,t,r),this.judgeXY_(e,t,r),this.judgeYX(e,t,r),this.judgeYX_(e,t,r))&&(setTimeout(function(){return window.alert(o.CHESS_TYPES[r].name+"赢了!!!")},0),this.chessBoardDom.onclick=function(){window.alert(o.CHESS_TYPES[r].name+"赢了, 别点了...")})}},{key:"judgeX",value:function(e,t,r){for(var n=e+4,i=e+1,s=this.chessPieceArr[e].length;i<s&&i<=n;i++)if(!this.chessPieceArr[i][t]||this.chessPieceArr[i][t].type!==r)return!1;return!0}},{key:"judgeX_",value:function(e,t,r){for(var n=e-4,i=e-1;i>-1&&i>=n;i--)if(!this.chessPieceArr[i][t]||this.chessPieceArr[i][t].type!==r)return!1;return!0}},{key:"judgeY",value:function(e,t,r){for(var n=t+4,i=t+1,s=this.chessPieceArr.length;i<s&&i<=n;i++)if(!this.chessPieceArr[e][i]||this.chessPieceArr[e][i].type!==r)return!1;return!0}},{key:"judgeY_",value:function(e,t,r){for(var n=t-4,i=t-1;i>-1&&i>=n;i--)if(!this.chessPieceArr[e][i]||this.chessPieceArr[e][i].type!==r)return!1;return!0}},{key:"judgeXY",value:function(e,t,r){for(var n=e+4,i=t+4,s=e+1,c=t+1,o=this.chessPieceArr.length,a=this.chessPieceArr[e].length;s<a&&c<o&&s<=n&&c<=i;){if(!this.chessPieceArr[s][c]||this.chessPieceArr[s][c].type!==r)return!1;s++,c++}return!0}},{key:"judgeXY_",value:function(e,t,r){for(var n=e-4,i=t-4,s=e-1,c=t-1;s>-1&&c>-1&&s>=n&&c>=i;){if(!this.chessPieceArr[s][c]||this.chessPieceArr[s][c].type!==r)return!1;s--,c--}return!0}},{key:"judgeYX",value:function(e,t,r){for(var n=e+4,i=t-4,s=e+1,c=t-1,o=this.chessPieceArr[e].length;s<o&&c>-1&&s<=n&&c>=i;){if(!this.chessPieceArr[s][c]||this.chessPieceArr[s][c].type!==r)return!1;s++,c--}return!0}},{key:"judgeYX_",value:function(e,t,r){for(var n=e-4,i=t+4,s=e-1,c=t+1,o=this.chessPieceArr.length;s>-1&&c<o&&s>=n&&c<=i;){if(!this.chessPieceArr[s][c]||this.chessPieceArr[s][c].type!==r)return!1;s--,c++}return!0}}]),e}();t.default=l},function(e,t,r){"use strict";var n,i=(n=r(5))&&n.__esModule?n:{default:n},s={isCanvas:!1},c=new i.default(s);document.getElementById("start").onclick=function(){c.removeDom(),c=new i.default(s)},document.getElementById("switch").onclick=function(){c.removeDom(),s={chessPieceArr:c.chessPieceArr,isCanvas:!s.isCanvas},c=new i.default(s)};var o=document.getElementById("cancel");o.onclick=function(){"悔棋"===o.innerHTML?c.cancelLastStep():c.cancelTheCancel()}}]);