!function(e){var t={};function s(i){if(t[i])return t[i].exports;var n=t[i]={i:i,l:!1,exports:{}};return e[i].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.m=e,s.c=t,s.d=function(e,t,i){s.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:i})},s.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},s.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="",s(s.s=9)}([function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CHESS_BOARD_SIZE=18,t.COLUMN_WIDTH=40,t.CHESS_PIECE_WIDTH=36,t.CHESS_BOARD_LINE_COLOR="#000",t.CHESS_BOARD_BACKGROUND="#3096f0",t.CHESS_PIECE_CLASS_NAME="chess-piece",function(e){e[e.WHITE_CHESS_PIECE=0]="WHITE_CHESS_PIECE",e[e.BLACK_CHESS_PIECE=1]="BLACK_CHESS_PIECE"}(t.CHESS_TYPES||(t.CHESS_TYPES={})),t.CHESS_COLORS=["#fff","#000"],t.CHESS_NAMES=["白子","黑子"]},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=s(0);t.initChessPieceArr=(()=>new Array(i.CHESS_BOARD_SIZE).fill(0).map(()=>new Array(i.CHESS_BOARD_SIZE).fill(-1))),t.transfromOffset2Grid=(e=>~~(e/i.COLUMN_WIDTH-.5)),t.atLeastOneTrue=((...e)=>e.map(e=>+!!e).reduce((e,t)=>e+t))},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=s(0);t.drawBoardDom=(()=>{const e=document.createElement("div"),t=(i.CHESS_BOARD_SIZE+1)*i.COLUMN_WIDTH;e.style.width=t+"px",e.style.height=t+"px",e.style.border=`1px solid ${i.CHESS_BOARD_LINE_COLOR}`,e.style.backgroundColor=i.CHESS_BOARD_BACKGROUND,e.style.position="relative";const s=(e="H")=>(s,n,r)=>{const c=document.createElement("div");return c.style.backgroundColor=i.CHESS_BOARD_LINE_COLOR,c.style.position="absolute","H"===e?(c.style.top=(n+1)*i.COLUMN_WIDTH+"px",c.style.width=t+"px",c.style.height="1px"):(c.style.left=(n+1)*i.COLUMN_WIDTH+"px",c.style.height=t+"px",c.style.width="1px"),c},n=new Array(i.CHESS_BOARD_SIZE).fill(1);return n.map(s("H")).forEach(t=>{e.appendChild(t)}),n.map(s("V")).forEach(t=>{e.appendChild(t)}),e}),t.initCanvas=(()=>{const e=document.getElementById("canvas");return e.style.display="block",e.style.border=`1px solid ${i.CHESS_BOARD_LINE_COLOR}`,e.style.backgroundColor=i.CHESS_BOARD_BACKGROUND,e}),t.drawBoardLines=(e=>{const t=(i.CHESS_BOARD_SIZE+1)*i.COLUMN_WIDTH;e.clearRect(0,0,t,t),e.fillStyle=i.CHESS_BOARD_LINE_COLOR;for(let s=0;s<i.CHESS_BOARD_SIZE;s++)e.fillRect((s+1)*i.COLUMN_WIDTH,0,1,t),e.fillRect(0,(s+1)*i.COLUMN_WIDTH,t,1)})},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=s(7),n=s(1),r=s(0);t.default=class extends i.default{constructor(e){super(e)}start(){this.indexedPiece.forEach(e=>this.chessPieceArr[e[0]][e[1]]=e[2]),this.gameOver=!1}onClick(e,t){const s=n.transfromOffset2Grid(e),i=n.transfromOffset2Grid(t);if(-1===this.chessPieceArr[s][i]){const e=this.indexedPiece.length%2,t=document.getElementById("cancel");return"悔棋"!==t.innerHTML&&(t.innerHTML="悔棋",this.canceled=null),this.chessPieceArr[s][i]=e,this.indexedPiece.push([s,i,e]),!0}return!1}judge(e,t){const s=this.judgeWin(e,t);if(s){const e=(this.indexedPiece.length-1)%2,t=r.CHESS_NAMES[e];setTimeout(()=>{window.alert(`${t} win !!!`)},100),this.gameOver=!0}return s}cancel(){this.canceled=this.indexedPiece.pop(),this.canceled?document.getElementById("cancel").innerHTML="撤销悔棋":window.alert("there is no chess piece to go back")}rollbackCancel(){this.indexedPiece.push(this.canceled),this.canceled=null,document.getElementById("cancel").innerHTML="悔棋"}restart(){this.chessPieceArr=n.initChessPieceArr(),this.indexedPiece=[],this.start()}}},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=s(0);t.default=class{constructor(e,t,s,i){this.x=e,this.y=t,this.chessType=s,this.ctx=i}draw(){this.ctx.fillStyle=i.CHESS_COLORS[this.chessType];const e=e=>(e+1)*i.COLUMN_WIDTH,t=new Path2D,s=e(this.x),n=e(this.y);t.moveTo(s,n),t.arc(s,n,i.CHESS_PIECE_WIDTH/2,0,2*Math.PI),this.ctx.fill(t)}}},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=s(3),n=s(2),r=s(0),c=s(4);t.default=class extends i.default{constructor(e){super(e),document.getElementById("cancel").onclick=(()=>{this.gameOver?window.alert("game is over..."):this.canceled?this.rollbackCancel():this.cancel()}),document.getElementById("start").onclick=(()=>{this.restart()})}initView(){this.viewContext||(this.viewContext=n.initCanvas().getContext("2d")),n.drawBoardLines(this.viewContext)}repaint(){this.initView(),this.indexedPiece.forEach((e,t)=>{new c.default(e[0],e[1],e[2],this.viewContext).draw()})}start(){super.start(),this.repaint();const e=this.indexedPiece[this.indexedPiece.length-1];document.getElementById("canvas").onclick=(e=>{this.onClick(e.clientX,e.clientY+window.scrollY)}),e&&this.judge(e[0],e[1])}cancel(){super.cancel(),this.repaint()}rollbackCancel(){super.rollbackCancel();const e=this.indexedPiece[this.indexedPiece.length-1];new c.default(e[0],e[1],e[2],this.viewContext).draw()}judge(e,t){const s=super.judge(e,t);if(s){const e=r.CHESS_NAMES[(this.indexedPiece.length-1)%2];document.getElementById("canvas").onclick=(()=>{window.alert(`game is overed, winner is ${e}`)})}return s}onClick(e,t){const s=super.onClick(e,t);if(s){const e=this.indexedPiece[this.indexedPiece.length-1];new c.default(e[0],e[1],e[2],this.viewContext).draw(),this.judge(e[0],e[1])}return s}restart(){super.restart(),this.repaint()}destroyView(){document.getElementById("canvas").style.display="none"}}},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=s(0);t.default=class{constructor(e,t,s,i,n){this.x=e,this.y=t,this.chessType=s,this.id=i,this.chessBoard=n}draw(){const e=this.createDom();this.chessBoard.appendChild(e)}createDom(){console.log(i.CHESS_COLORS[this.chessType]);const e=document.createElement("div");e.id=this.id+"",e.style.width=i.CHESS_PIECE_WIDTH+"px",e.style.height=i.CHESS_PIECE_WIDTH+"px",e.style.borderRadius=i.CHESS_PIECE_WIDTH/2+"px",e.style.backgroundColor=i.CHESS_COLORS[this.chessType],e.style.position="absolute",e.className=i.CHESS_PIECE_CLASS_NAME;const t=e=>(e+1)*i.COLUMN_WIDTH-i.CHESS_PIECE_WIDTH/2+"px";return e.style.left=t(this.x),e.style.top=t(this.y),e}}},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=s(1),n=s(1);t.default=class{constructor(e){this.indexedPiece=e||[],this.chessPieceArr=n.initChessPieceArr()}judgeWin(e,t){const s=this.chessPieceArr[e][t];return!!i.atLeastOneTrue(this.judgeX(e,t,s),this.judgeX_(e,t,s),this.judgeY(e,t,s),this.judgeY_(e,t,s),this.judgeXY(e,t,s),this.judgeXY_(e,t,s),this.judgeYX(e,t,s),this.judgeYX_(e,t,s))}judgeX(e,t,s){const i=e+4;for(let n=e+1,r=this.chessPieceArr[e].length;n<r&&n<=i;n++)if(this.chessPieceArr[n][t]<0||this.chessPieceArr[n][t]!==s)return!1;return!0}judgeX_(e,t,s){const i=e-4;for(let n=e-1;n>-1&&n>=i;n--)if(this.chessPieceArr[n][t]<0||this.chessPieceArr[n][t]!==s)return!1;return!0}judgeY(e,t,s){const i=t+4;for(let n=t+1,r=this.chessPieceArr.length;n<r&&n<=i;n++)if(this.chessPieceArr[e][n]<0||this.chessPieceArr[e][n]!==s)return!1;return!0}judgeY_(e,t,s){const i=t-4;for(let n=t-1;n>-1&&n>=i;n--)if(this.chessPieceArr[e][n]<0||this.chessPieceArr[e][n]!==s)return!1;return!0}judgeXY(e,t,s){const i=e+4,n=t+4;let r=e+1,c=t+1,o=this.chessPieceArr.length,l=this.chessPieceArr[e].length;for(;r<l&&c<o&&r<=i&&c<=n;){if(this.chessPieceArr[r][c]<0||this.chessPieceArr[r][c]!==s)return!1;r++,c++}return!0}judgeXY_(e,t,s){const i=e-4,n=t-4;let r=e-1,c=t-1;for(;r>-1&&c>-1&&r>=i&&c>=n;){if(this.chessPieceArr[r][c]<0||this.chessPieceArr[r][c]!==s)return!1;r--,c--}return!0}judgeYX(e,t,s){const i=e+4,n=t-4;let r=e+1,c=t-1,o=this.chessPieceArr[e].length;for(;r<o&&c>-1&&r<=i&&c>=n;){if(this.chessPieceArr[r][c]<0||this.chessPieceArr[r][c]!==s)return!1;r++,c--}return!0}judgeYX_(e,t,s){const i=e-4,n=t+4;let r=e-1,c=t+1,o=this.chessPieceArr.length;for(;r>-1&&c<o&&r>=i&&c<=n;){if(this.chessPieceArr[r][c]<0||this.chessPieceArr[r][c]!==s)return!1;r--,c++}return!0}}},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=s(3),n=s(2),r=s(6),c=s(0);t.default=class extends i.default{constructor(e){super(e),document.getElementById("cancel").onclick=(()=>{this.gameOver?window.alert("game is over..."):this.canceled?this.rollbackCancel():this.cancel()}),document.getElementById("start").onclick=(()=>{this.restart()})}initView(){this.viewContext||(this.viewContext=n.drawBoardDom(),document.getElementById("app").appendChild(this.viewContext))}start(){super.start(),this.indexedPiece.forEach((e,t)=>new r.default(e[0],e[1],e[2],t+1,this.viewContext).draw()),this.initView();const e=this.indexedPiece[this.indexedPiece.length-1];this.viewContext.onclick=(e=>{this.onClick(e.clientX,e.clientY+window.scrollY)}),e&&this.judge(e[0],e[1])}onClick(e,t){const s=super.onClick(e,t);if(s){const e=this.indexedPiece[this.indexedPiece.length-1];new r.default(e[0],e[1],e[2],this.indexedPiece.length,this.viewContext).draw(),this.judge(e[0],e[1])}return s}cancel(){super.cancel(),this.viewContext.removeChild(document.getElementById(String(this.indexedPiece.length+1)))}rollbackCancel(){super.rollbackCancel();const e=this.indexedPiece[this.indexedPiece.length-1];new r.default(e[0],e[1],e[2],this.indexedPiece.length,this.viewContext).draw()}judge(e,t){const s=super.judge(e,t);if(s){const e=c.CHESS_NAMES[(this.indexedPiece.length-1)%2];this.viewContext.onclick=(()=>{window.alert(`game is overed, winner is ${e}`)})}return s}restart(){super.restart(),Array.from(document.getElementsByClassName(c.CHESS_PIECE_CLASS_NAME)).forEach(e=>{e.parentNode.removeChild(e)}),this.start()}destroyView(){document.getElementById("app").removeChild(this.viewContext)}}},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=s(8),n=s(5);console.log("hello world"),console.log(new Array(100).fill(1)),console.log("1 + 1 = 2");let r,c="dom",o=[];(r=new i.default(o)).start(),document.getElementById("switch").onclick=(()=>{if(r&&r.destroyView(),o=r.indexedPiece,console.log(o),"dom"===c){const e=new n.default(o);e.start(),r=e,c="dom"}else{const e=new i.default(o);e.start(),r=e,c="canvas"}})}]);